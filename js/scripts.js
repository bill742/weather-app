function getCityData(){var e="http://api.openweathermap.org/data/2.5/forecast/weather?q="+city+"&units="+unit+"&id=524901&APPID=b32c84201db94b92ed42d393cac6526b",t="",a=$.getJSON(e,function(){if(4===a.readyState){var e=JSON.parse(a.responseText);console.log(e);var n=e.list[0].main.temp,i=JSON.stringify(n).split(".",1),o=e.city.name;t='<p class="data-city">'+o+"</p>",t+='<i class="owf owf-'+e.list[0].weather[0].id+'"></i>',t+='<p class="unit-text">'+e.list[0].weather[0].main+"</p>",t+='<p id="unitText" class="unit-text">Current Temperature: '+i+unitIcon+"</p>",getImages(o),document.getElementById("dataBox").innerHTML=t}else t='<p class="unit-text">Error - no response</p>'});document.getElementById("dataBox").innerHTML=t}function getCity(){city=document.getElementById("search").value,""===city?document.getElementById("dataBox").innerHTML='<p class="unit-text">Please search for a city!</p>':getCityData()}function loadJSON(e,t,a){var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&(200===n.status?t&&t(JSON.parse(n.responseText)):a&&a(n))},n.open("GET",e,!0),n.send()}function getImages(e){var t="sk6rmwqmf3gmxdfxt3at4rxe",a="https://api.gettyimages.com:443/v3/search/images/creative?file_types=jpg&graphical_styles=photography&license_models=royaltyfree&number_of_people=none&orientations=Horizontal%2CPanoramicHorizontal&fields=comp&phrase="+e;$.ajax({type:"GET",url:a,beforeSend:function(e){e.setRequestHeader("Api-Key",t)}}).done(function(e){var t,a,n=e.result_count;n>30?(t=Math.floor(29*Math.random())+1,a="url("+e.images[t].display_sizes[0].uri+" )",$("body").css("background-image",a)):n>0&&(t=Math.floor(Math.random()*e.result_count)+1,a="url("+e.images[t].display_sizes[0].uri+" )",$("body").css("background-image",a))}).fail(function(e){})}function changeUnit(){var e=document.getElementById("unitBtn");"Show me Celcius"==e.value?(unitIcon="°C",unit="metric",e.value="Show me Fahrenheit"):(unitIcon="°F",unit="imperial",e.value="Show me Celcius"),getCityData()}document.getElementById("search").onkeypress=function(e){13!=e.keyCode&&13!=e.which||getCity()},"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(e){var t=e.coords.latitude,a=e.coords.longitude,n="https://maps.googleapis.com/maps/api/geocode/json?latlng="+t+","+a+"&sensor=true&key=AIzaSyAlM9dEqJwCvY0l54lyQdvL57HqDPgOJ68";loadJSON(n,function(e){city=e.results[5].address_components[0].long_name,getCityData(city)})});var unit="imperial",unitIcon="°F";