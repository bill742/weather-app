function loadJSON(e,t,n){var o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&(200===o.status?t&&t(JSON.parse(o.responseText)):n&&n(o))},o.open("GET",e,!0),o.send()}function changeUnit(){var e=document.getElementById("unitBtn");"Show me Celcius"==e.value?(unitIcon="°C",unit="metric",e.value="Show me Fahrenheit"):(unitIcon="°F",unit="imperial",e.value="Show me Celcius")}function getCityData(){var e="http://api.openweathermap.org/data/2.5/forecast/weather?q="+city+"&units="+unit+"&id=524901&APPID=b32c84201db94b92ed42d393cac6526b",t=new XMLHttpRequest;t.open("GET",e,!1),t.send(null);var n;if(4===t.readyState){var o=JSON.parse(t.responseText),a=o.list[0].main.temp,i=JSON.stringify(a).split(".",1);n="<p>City: "+o.city.name+"</p>",n+="<img src=http://openweathermap.org/img/w/"+o.list[0].weather[0].icon+".png>",n+=o.list[0].weather[0].main,n+="<p>Current Temperature: "+i+unitIcon+"</p>",document.getElementById("dataBox").innerHTML=n}else n="Error - no response";document.getElementById("dataBox").innerHTML=n}function getCity(){city=document.getElementById("search").value,""===city?document.getElementById("dataBox").innerHTML="Please search for a city!":getCityData()}var unit="imperial",unitIcon="°F",city;"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(e){var t=e.coords.latitude,n=e.coords.longitude;console.log(t,n);var o="https://maps.googleapis.com/maps/api/geocode/json?latlng="+t+","+n+"&sensor=true&key=AIzaSyAlM9dEqJwCvY0l54lyQdvL57HqDPgOJ68";console.log(o),loadJSON(o,function(e){city=e.results[5].address_components[0].long_name,console.log(city),getCityData(city)})}):console.log("geolocation IS NOT available"),document.getElementById("search").onkeypress=function(e){13!=e.keyCode&&13!=e.which||getCity()};